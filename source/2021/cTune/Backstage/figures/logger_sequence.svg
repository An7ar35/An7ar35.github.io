<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="521px" preserveAspectRatio="none" style="width:688px;height:521px;background:#FFFFFF;" version="1.1" viewBox="0 0 688 521" width="688px" zoomAndPan="magnify"><defs><filter height="300%" id="fh74gn2mzh9a0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="509.3203" style="stroke:#A80036;stroke-width:1.0;" width="110" x="383" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="104" x="386" y="18.0669">worker thread</text><rect fill="#FFFFFF" filter="url(#fh74gn2mzh9a0)" height="83.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="123" y="70.4297"/><rect fill="#FFFFFF" filter="url(#fh74gn2mzh9a0)" height="397.5938" style="stroke:#A80036;stroke-width:1.0;" width="10" x="260" y="70.4297"/><rect fill="#ADD8E6" filter="url(#fh74gn2mzh9a0)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="265" y="293.4922"/><rect fill="#FFFFFF" filter="url(#fh74gn2mzh9a0)" height="210.9297" style="stroke:#A80036;stroke-width:1.0;" width="10" x="433" y="182.9609"/><rect fill="#00BFFF" filter="url(#fh74gn2mzh9a0)" height="158.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="438" y="235.2266"/><rect fill="#ADD8E6" filter="url(#fh74gn2mzh9a0)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="443" y="322.625"/><rect fill="#FFFFFF" filter="url(#fh74gn2mzh9a0)" height="104.5313" style="stroke:#000000;stroke-width:2.0;" width="465.5" x="208.5" y="255.2266"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="128" x2="128" y1="60.4297" y2="477.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="264.5" x2="264.5" y1="60.4297" y2="477.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="438" x2="438" y1="60.4297" y2="477.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="622" x2="622" y1="60.4297" y2="477.0234"/><rect fill="#FEFECE" filter="url(#fh74gn2mzh9a0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="64" x="94" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="101" y="45.1279">Logger</text><rect fill="#FEFECE" filter="url(#fh74gn2mzh9a0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="64" x="94" y="476.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="101" y="496.0186">Logger</text><path d="M223.5,34.1328 L306.5,34.1328 C311.5,34.1328 311.5,47.2813 311.5,47.2813 C311.5,47.2813 311.5,60.4297 306.5,60.4297 L223.5,60.4297 C218.5,60.4297 218.5,47.2813 218.5,47.2813 C218.5,47.2813 218.5,34.1328 223.5,34.1328 " fill="#FEFECE" filter="url(#fh74gn2mzh9a0)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M306.5,34.1328 C301.5,34.1328 301.5,47.2813 301.5,47.2813 C301.5,60.4297 306.5,60.4297 306.5,60.4297 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="223.5" y="52.1279">LogQueue</text><path d="M223.5,476.0234 L306.5,476.0234 C311.5,476.0234 311.5,489.1719 311.5,489.1719 C311.5,489.1719 311.5,502.3203 306.5,502.3203 L223.5,502.3203 C218.5,502.3203 218.5,489.1719 218.5,489.1719 C218.5,489.1719 218.5,476.0234 223.5,476.0234 " fill="#FEFECE" filter="url(#fh74gn2mzh9a0)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M306.5,476.0234 C301.5,476.0234 301.5,489.1719 301.5,489.1719 C301.5,502.3203 306.5,502.3203 306.5,502.3203 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="223.5" y="494.0186">LogQueue</text><rect fill="#FEFECE" filter="url(#fh74gn2mzh9a0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="84" x="394" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="401" y="45.1279">LogWriter</text><rect fill="#FEFECE" filter="url(#fh74gn2mzh9a0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="84" x="394" y="476.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="401" y="496.0186">LogWriter</text><rect fill="#FEFECE" filter="url(#fh74gn2mzh9a0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="80" x="580" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="587" y="45.1279">ctune.log</text><rect fill="#FEFECE" filter="url(#fh74gn2mzh9a0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="80" x="580" y="476.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="587" y="496.0186">ctune.log</text><rect fill="#FFFFFF" filter="url(#fh74gn2mzh9a0)" height="83.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="123" y="70.4297"/><rect fill="#FFFFFF" filter="url(#fh74gn2mzh9a0)" height="397.5938" style="stroke:#A80036;stroke-width:1.0;" width="10" x="260" y="70.4297"/><rect fill="#ADD8E6" filter="url(#fh74gn2mzh9a0)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="265" y="293.4922"/><rect fill="#FFFFFF" filter="url(#fh74gn2mzh9a0)" height="210.9297" style="stroke:#A80036;stroke-width:1.0;" width="10" x="433" y="182.9609"/><rect fill="#00BFFF" filter="url(#fh74gn2mzh9a0)" height="158.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="438" y="235.2266"/><rect fill="#ADD8E6" filter="url(#fh74gn2mzh9a0)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="443" y="322.625"/><polygon fill="#A80036" points="111,87.5625,121,91.5625,111,95.5625,115,91.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="0" x2="117" y1="91.5625" y2="91.5625"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="104" x="7" y="86.4966">CTUNE_LOG(..)</text><polygon fill="#FBFB77" filter="url(#fh74gn2mzh9a0)" points="424,104.5625,452,104.5625,462,115.5625,452,127.5625,424,127.5625,414,115.5625,424,104.5625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="426" y="120.6294">idle</text><polygon fill="#A80036" points="248,149.8281,258,153.8281,248,157.8281,252,153.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="128" x2="254" y1="153.8281" y2="153.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="135" y="148.7622">queue message</text><polygon fill="#A80036" points="421,178.9609,431,182.9609,421,186.9609,425,182.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="270" x2="427" y1="182.9609" y2="182.9609"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="64" x="277" y="177.895">resume()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="443" x2="490" y1="222.2266" y2="222.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="490" y1="222.2266" y2="235.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="449" x2="490" y1="235.2266" y2="235.2266"/><polygon fill="#A80036" points="459,231.2266,449,235.2266,459,239.2266,455,235.2266" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="455" y="202.0278">wakeup and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="455" y="217.1606">reset timeout</text><path d="M208.5,255.2266 L284.5,255.2266 L284.5,262.2266 L274.5,272.2266 L208.5,272.2266 L208.5,255.2266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:2.0;" width="465.5" x="208.5" y="255.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="223.5" y="268.2935">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="38" x="299.5" y="267.437">[while</text><text fill="#000000" font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="119" x="341.5" y="267.437">!LogQueue.empty()</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="23" x="464.5" y="267.437">and</text><text fill="#000000" font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="491.5" y="267.437">timeout &gt; 0</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="568.5" y="267.437">]</text><polygon fill="#A80036" points="286,289.4922,276,293.4922,286,297.4922,282,293.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="280" x2="437" y1="293.4922" y2="293.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="292" y="288.4263">dequeue message</text><polygon fill="#A80036" points="431,318.625,441,322.625,431,326.625,435,322.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="270" x2="437" y1="322.625" y2="322.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="277" y="317.5591">message dequeued</text><polygon fill="#A80036" points="610,347.7578,620,351.7578,610,355.7578,614,351.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="448" x2="616" y1="351.7578" y2="351.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="455" y="346.6919">write message to file</text><line style="stroke:#A80036;stroke-width:1.0;" x1="448" x2="490" y1="392.8906" y2="392.8906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="490" x2="490" y1="392.8906" y2="405.8906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="443" x2="490" y1="405.8906" y2="405.8906"/><polygon fill="#A80036" points="453,401.8906,443,405.8906,453,409.8906,449,405.8906" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="455" y="387.8247">sleep</text><polygon fill="#FBFB77" filter="url(#fh74gn2mzh9a0)" points="424,438.8906,452,438.8906,462,449.8906,452,461.8906,424,461.8906,414,449.8906,424,438.8906" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="426" y="454.9575">idle</text><!--MD5=[06f700d2aba71c242249e5163935f19c]
@startuml
'https://plantuml.com/component-diagram

'skinparam ParticipantPadding 10

participant Logger
queue LogQueue
    box "worker thread"
    participant LogWriter
end box
participant "ctune.log" as out

activate Logger
activate LogQueue
-> Logger : ""CTUNE_LOG(..)""
hnote over LogWriter : idle
Logger   -> LogQueue : queue message
deactivate Logger

LogQueue -> LogWriter ++ : ""resume()""
LogWriter -> LogWriter ++ #deepskyblue : wakeup and\nreset timeout

loop while ""!LogQueue.empty()"" and ""timeout > 0""
    LogWriter -> LogQueue  ++ #lightblue : dequeue message
    LogWriter <- - LogQueue - -++ #lightblue : message dequeued
    LogWriter -> out - - : write message to file
end
LogWriter -> LogWriter - - : sleep

deactivate LogWriter
|||
hnote over LogWriter : idle

@enduml

@startuml


participant Logger
queue LogQueue
    box "worker thread"
    participant LogWriter
end box
participant "ctune.log" as out

activate Logger
activate LogQueue
-> Logger : ""CTUNE_LOG(..)""
hnote over LogWriter : idle
Logger   -> LogQueue : queue message
deactivate Logger

LogQueue -> LogWriter ++ : ""resume()""
LogWriter -> LogWriter ++ #deepskyblue : wakeup and\nreset timeout

loop while ""!LogQueue.empty()"" and ""timeout > 0""
    LogWriter -> LogQueue  ++ #lightblue : dequeue message
    LogWriter <- - LogQueue - -++ #lightblue : message dequeued
    LogWriter -> out - - : write message to file
end
LogWriter -> LogWriter - - : sleep

deactivate LogWriter
|||
hnote over LogWriter : idle

@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>