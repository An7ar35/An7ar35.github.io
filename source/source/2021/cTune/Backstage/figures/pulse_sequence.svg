<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="900px" preserveAspectRatio="none" style="width:534px;height:900px;background:#FFFFFF;" version="1.1" viewBox="0 0 534 900" width="534px" zoomAndPan="magnify"><defs><filter height="300%" id="f1sh3r15cyt5ht" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1sh3r15cyt5ht)" height="797.5859" style="stroke:#A80036;stroke-width:1.0;" width="10" x="46" y="50.2969"/><rect fill="#FFFFFF" filter="url(#f1sh3r15cyt5ht)" height="751.3203" style="stroke:#A80036;stroke-width:1.0;" width="10" x="160" y="95.5625"/><rect fill="#FFFFFF" filter="url(#f1sh3r15cyt5ht)" height="797.5859" style="stroke:#A80036;stroke-width:1.0;" width="10" x="442" y="50.2969"/><rect fill="#FFFFFF" filter="url(#f1sh3r15cyt5ht)" height="428.9922" style="stroke:#000000;stroke-width:2.0;" width="510" x="10" y="57.2969"/><rect fill="#FFFFFF" filter="url(#f1sh3r15cyt5ht)" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="386" x="124" y="256.2266"/><rect fill="#FFFFFF" filter="url(#f1sh3r15cyt5ht)" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="381" x="124" y="403.8906"/><rect fill="#FFFFFF" filter="url(#f1sh3r15cyt5ht)" height="133.6641" style="stroke:#000000;stroke-width:2.0;" width="495" x="10" y="500.2891"/><rect fill="#FFFFFF" filter="url(#f1sh3r15cyt5ht)" height="191.9297" style="stroke:#000000;stroke-width:2.0;" width="495" x="10" y="647.9531"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="51" x2="51" y1="40.2969" y2="856.8828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="165" x2="165" y1="40.2969" y2="856.8828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="447" x2="447" y1="40.2969" y2="856.8828"/><rect fill="#FEFECE" filter="url(#f1sh3r15cyt5ht)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="27" y="24.9951">cTune</text><rect fill="#FEFECE" filter="url(#f1sh3r15cyt5ht)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="20" y="855.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="27" y="875.8779">cTune</text><rect fill="#FEFECE" filter="url(#f1sh3r15cyt5ht)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="134" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="141" y="24.9951">plugin</text><rect fill="#FEFECE" filter="url(#f1sh3r15cyt5ht)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="134" y="855.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="141" y="875.8779">plugin</text><rect fill="#FEFECE" filter="url(#f1sh3r15cyt5ht)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="399" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="406" y="24.9951">PulseAudio</text><rect fill="#FEFECE" filter="url(#f1sh3r15cyt5ht)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="399" y="855.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="406" y="875.8779">PulseAudio</text><rect fill="#FFFFFF" filter="url(#f1sh3r15cyt5ht)" height="797.5859" style="stroke:#A80036;stroke-width:1.0;" width="10" x="46" y="50.2969"/><rect fill="#FFFFFF" filter="url(#f1sh3r15cyt5ht)" height="751.3203" style="stroke:#A80036;stroke-width:1.0;" width="10" x="160" y="95.5625"/><rect fill="#FFFFFF" filter="url(#f1sh3r15cyt5ht)" height="797.5859" style="stroke:#A80036;stroke-width:1.0;" width="10" x="442" y="50.2969"/><path d="M10,57.2969 L117,57.2969 L117,64.2969 L107,74.2969 L10,74.2969 L10,57.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="428.9922" style="stroke:#000000;stroke-width:2.0;" width="510" x="10" y="57.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62" x="25" y="70.3638">Initialise</text><polygon fill="#A80036" points="148,91.5625,158,95.5625,148,99.5625,152,95.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="56" x2="154" y1="95.5625" y2="95.5625"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="64" x="63" y="90.4966">init(..)</text><polygon fill="#A80036" points="430,120.6953,440,124.6953,430,128.6953,434,124.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="124.6953" y2="124.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="177" y="119.6294">setup properties</text><polygon fill="#A80036" points="430,149.8281,440,153.8281,430,157.8281,434,153.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="153.8281" y2="153.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="177" y="148.7622">set context state callback</text><polygon fill="#A80036" points="430,178.9609,440,182.9609,430,186.9609,434,182.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="182.9609" y2="182.9609"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="176" x="177" y="177.895">pa_context_connect(..)</text><polygon fill="#A80036" points="430,208.0938,440,212.0938,430,216.0938,434,212.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="212.0938" y2="212.0938"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="232" x="177" y="207.0278">pa_threaded_mainloop_lock(..)</text><polygon fill="#A80036" points="430,237.2266,440,241.2266,430,245.2266,434,241.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="241.2266" y2="241.2266"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="240" x="177" y="236.1606">pa_threaded_mainloop_start(..)</text><path d="M124,256.2266 L200,256.2266 L200,263.2266 L190,273.2266 L124,273.2266 L124,256.2266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="386" x="124" y="256.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="139" y="269.2935">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="215" y="268.437">[</text><text fill="#000000" font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="280" x="220" y="268.437">pa_context_get_state != PA_CONTEXT_READY</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="500" y="268.437">]</text><polygon fill="#A80036" points="430,290.4922,440,294.4922,430,298.4922,434,294.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="294.4922" y2="294.4922"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="232" x="177" y="289.4263">pa_threaded_mainloop_wait(..)</text><polygon fill="#A80036" points="430,326.625,440,330.625,430,334.625,434,330.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="330.625" y2="330.625"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="136" x="177" y="325.5591">pa_stream_new(..)</text><polygon fill="#A80036" points="430,355.7578,440,359.7578,430,363.7578,434,359.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="359.7578" y2="359.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="177" y="354.6919">set stream callbacks</text><polygon fill="#A80036" points="430,384.8906,440,388.8906,430,392.8906,434,388.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="388.8906" y2="388.8906"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="240" x="177" y="383.8247">pa_stream_connect_playback(..)</text><path d="M124,403.8906 L200,403.8906 L200,410.8906 L190,420.8906 L124,420.8906 L124,403.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="381" x="124" y="403.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="139" y="416.9575">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="215" y="416.1011">[</text><text fill="#000000" font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="266" x="220" y="416.1011">pa_stream_get_state != PA_STREAM_READY</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="486" y="416.1011">]</text><polygon fill="#A80036" points="430,438.1563,440,442.1563,430,446.1563,434,442.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="442.1563" y2="442.1563"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="232" x="177" y="437.0903">pa_threaded_mainloop_wait(..)</text><polygon fill="#A80036" points="430,474.2891,440,478.2891,430,482.2891,434,478.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="478.2891" y2="478.2891"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="248" x="177" y="473.2231">pa_threaded_mainloop_unlock(..)</text><path d="M10,500.2891 L197,500.2891 L197,507.2891 L187,517.2891 L10,517.2891 L10,500.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:2.0;" width="495" x="10" y="500.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="142" x="25" y="513.356">Playback PCM data</text><polygon fill="#A80036" points="148,534.5547,158,538.5547,148,542.5547,152,538.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="56" x2="154" y1="538.5547" y2="538.5547"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="72" x="63" y="533.4888">write(..)</text><polygon fill="#A80036" points="430,563.6875,440,567.6875,430,571.6875,434,567.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="567.6875" y2="567.6875"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="232" x="177" y="562.6216">pa_threaded_mainloop_lock(..)</text><polygon fill="#A80036" points="430,592.8203,440,596.8203,430,600.8203,434,596.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="596.8203" y2="596.8203"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="152" x="177" y="591.7544">pa_stream_write(..)</text><polygon fill="#A80036" points="430,621.9531,440,625.9531,430,629.9531,434,625.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="625.9531" y2="625.9531"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="248" x="177" y="620.8872">pa_threaded_mainloop_unlock(..)</text><path d="M10,647.9531 L127,647.9531 L127,654.9531 L117,664.9531 L10,664.9531 L10,647.9531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="191.9297" style="stroke:#000000;stroke-width:2.0;" width="495" x="10" y="647.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="25" y="661.02">Shutdown</text><polygon fill="#A80036" points="148,682.2188,158,686.2188,148,690.2188,152,686.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="56" x2="154" y1="686.2188" y2="686.2188"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="80" x="63" y="681.1528">shutdown()</text><polygon fill="#A80036" points="430,711.3516,440,715.3516,430,719.3516,434,715.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="715.3516" y2="715.3516"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="232" x="177" y="710.2856">pa_threaded_mainloop_stop(..)</text><polygon fill="#A80036" points="430,740.4844,440,744.4844,430,748.4844,434,744.4844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="744.4844" y2="744.4844"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="200" x="177" y="739.4185">pa_context_disconnect(..)</text><polygon fill="#A80036" points="430,769.6172,440,773.6172,430,777.6172,434,773.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="773.6172" y2="773.6172"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="192" x="177" y="768.5513">pa_stream_disconnect(..)</text><polygon fill="#A80036" points="430,798.75,440,802.75,430,806.75,434,802.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="802.75" y2="802.75"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="152" x="177" y="797.6841">pa_stream_unref(..)</text><polygon fill="#A80036" points="430,827.8828,440,831.8828,430,835.8828,434,831.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="170" x2="436" y1="831.8828" y2="831.8828"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="232" x="177" y="826.8169">pa_threaded_mainloop_free(..)</text><!--MD5=[8c852255277dcd1e786bafa999e876e9]
@startuml
'https://plantuml.com/sequence-diagram

'autonumber

participant cTune
participant plugin
participant PulseAudio

activate cTune
activate PulseAudio

group Initialise
    cTune -> plugin : ""init(..)""
    activate plugin
    plugin -> PulseAudio : setup properties
    plugin -> PulseAudio : set context state callback
    plugin -> PulseAudio : ""pa_context_connect(..)""
    plugin -> PulseAudio : ""pa_threaded_mainloop_lock(..)""
    plugin -> PulseAudio : ""pa_threaded_mainloop_start(..)""
    loop ""pa_context_get_state != PA_CONTEXT_READY""
        plugin -> PulseAudio : ""pa_threaded_mainloop_wait(..)""
    end loop
    plugin -> PulseAudio : ""pa_stream_new(..)""
    plugin -> PulseAudio : set stream callbacks
    plugin -> PulseAudio : ""pa_stream_connect_playback(..)""
    loop ""pa_stream_get_state != PA_STREAM_READY""
        plugin -> PulseAudio : ""pa_threaded_mainloop_wait(..)""
    end loop
    plugin -> PulseAudio : ""pa_threaded_mainloop_unlock(..)""
end group

group Playback PCM data
    cTune -> plugin : ""write(..)""
    plugin -> PulseAudio : ""pa_threaded_mainloop_lock(..)""
    plugin -> PulseAudio : ""pa_stream_write(..)""
    plugin -> PulseAudio : ""pa_threaded_mainloop_unlock(..)""
end group

group Shutdown
    cTune  -> plugin : ""shutdown()""
    plugin -> PulseAudio : ""pa_threaded_mainloop_stop(..)""
    plugin -> PulseAudio : ""pa_context_disconnect(..)""
    plugin -> PulseAudio : ""pa_stream_disconnect(..)""
    plugin -> PulseAudio : ""pa_stream_unref(..)""
    plugin -> PulseAudio : ""pa_threaded_mainloop_free(..)""
end group

deactivate plugin
@enduml

@startuml


participant cTune
participant plugin
participant PulseAudio

activate cTune
activate PulseAudio

group Initialise
    cTune -> plugin : ""init(..)""
    activate plugin
    plugin -> PulseAudio : setup properties
    plugin -> PulseAudio : set context state callback
    plugin -> PulseAudio : ""pa_context_connect(..)""
    plugin -> PulseAudio : ""pa_threaded_mainloop_lock(..)""
    plugin -> PulseAudio : ""pa_threaded_mainloop_start(..)""
    loop ""pa_context_get_state != PA_CONTEXT_READY""
        plugin -> PulseAudio : ""pa_threaded_mainloop_wait(..)""
    end loop
    plugin -> PulseAudio : ""pa_stream_new(..)""
    plugin -> PulseAudio : set stream callbacks
    plugin -> PulseAudio : ""pa_stream_connect_playback(..)""
    loop ""pa_stream_get_state != PA_STREAM_READY""
        plugin -> PulseAudio : ""pa_threaded_mainloop_wait(..)""
    end loop
    plugin -> PulseAudio : ""pa_threaded_mainloop_unlock(..)""
end group

group Playback PCM data
    cTune -> plugin : ""write(..)""
    plugin -> PulseAudio : ""pa_threaded_mainloop_lock(..)""
    plugin -> PulseAudio : ""pa_stream_write(..)""
    plugin -> PulseAudio : ""pa_threaded_mainloop_unlock(..)""
end group

group Shutdown
    cTune  -> plugin : ""shutdown()""
    plugin -> PulseAudio : ""pa_threaded_mainloop_stop(..)""
    plugin -> PulseAudio : ""pa_context_disconnect(..)""
    plugin -> PulseAudio : ""pa_stream_disconnect(..)""
    plugin -> PulseAudio : ""pa_stream_unref(..)""
    plugin -> PulseAudio : ""pa_threaded_mainloop_free(..)""
end group

deactivate plugin
@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>